{"version":3,"file":"vue.js","sources":["../src/utils.js","../src/ovserver/index.js","../src/state.js","../src/init.js","../src/index.js"],"sourcesContent":["export const isFunction = (val) => typeof val === \"function\";\r\n\r\nexport const isObject = (val) => typeof val === \"object\" && val !== null;\r\n","import { isObject } from \"../utils\";\r\n\r\nclass Observer {\r\n  constructor(data) {\r\n    this.walk(data);\r\n  }\r\n  walk(data) {\r\n    Object.keys(data).forEach((key) => {\r\n      defineReactive(data, key, data[key]);\r\n    });\r\n  }\r\n}\r\n\r\nfunction defineReactive(data, key, val) {\r\n  observer(val);\r\n  Object.defineProperty(data, key, {\r\n    get() {\r\n      return val;\r\n    },\r\n    set(newVal) {\r\n      observer(newVal);\r\n      val = newVal;\r\n    },\r\n  });\r\n}\r\n\r\nexport function observer(data) {\r\n  if (!isObject(data)) {\r\n    return;\r\n  }\r\n  return new Observer(data);\r\n}\r\n","import { isFunction } from \"./utils\";\r\nimport { observer } from \"./ovserver/index\";\r\n\r\nfunction proxy(vm, source, key) {\r\n  Object.defineProperty(vm, key, {\r\n    get() {\r\n      return vm[source][key];\r\n    },\r\n    set(newVal) {\r\n      vm[source][key] = newVal;\r\n    },\r\n  });\r\n}\r\n\r\nexport function initState(vm) {\r\n  const opts = vm.$options;\r\n  /*   if(opts.props) {\r\n      initProps()\r\n  } */\r\n  if (opts.data) {\r\n    initData(vm);\r\n  }\r\n  /* if(opts.computed) {\r\n\r\n  }\r\n  if(opts.watch) {\r\n\r\n  } */\r\n}\r\n\r\nfunction initData(vm) {\r\n  let data = vm.$options.data;\r\n  data = vm._data = isFunction(data) ? data.call(vm) : data;\r\n  console.log('vm---', vm);\r\n  for (let key in data) {\r\n    proxy(vm, \"_data\", key);\r\n  }\r\n  observer(data);\r\n}\r\n","import { initState } from \"./state\";\r\nexport function initMixin(Vue) {\r\n  Vue.prototype._init = function (options) {\r\n    const vm = this;\r\n    vm.$options = options;\r\n\r\n    // 初始化数据\r\n    initState(vm);\r\n  };\r\n}\r\n","import {initMixin} from \"./init\"\r\nfunction Vue(options) {\r\n  this._init(options);\r\n}\r\ninitMixin(Vue)\r\n\r\nexport default Vue;\r\n"],"names":["isFunction","val","isObject","Observer","data","walk","Object","keys","forEach","key","defineReactive","observer","defineProperty","get","set","newVal","proxy","vm","source","initState","opts","$options","initData","_data","call","console","log","initMixin","Vue","prototype","_init","options"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAAO,IAAMA,UAAU,GAAG,SAAbA,UAAa,CAACC,GAAD;EAAA,SAAS,OAAOA,GAAP,KAAe,UAAxB;EAAA,CAAnB;EAEA,IAAMC,QAAQ,GAAG,SAAXA,QAAW,CAACD,GAAD;EAAA,SAAS,QAAOA,GAAP,MAAe,QAAf,IAA2BA,GAAG,KAAK,IAA5C;EAAA,CAAjB;;MCADE;EACJ,oBAAYC,IAAZ,EAAkB;EAAA;;EAChB,SAAKC,IAAL,CAAUD,IAAV;EACD;;;;aACD,cAAKA,IAAL,EAAW;EACTE,MAAAA,MAAM,CAACC,IAAP,CAAYH,IAAZ,EAAkBI,OAAlB,CAA0B,UAACC,GAAD,EAAS;EACjCC,QAAAA,cAAc,CAACN,IAAD,EAAOK,GAAP,EAAYL,IAAI,CAACK,GAAD,CAAhB,CAAd;EACD,OAFD;EAGD;;;;;;EAGH,SAASC,cAAT,CAAwBN,IAAxB,EAA8BK,GAA9B,EAAmCR,GAAnC,EAAwC;EACtCU,EAAAA,QAAQ,CAACV,GAAD,CAAR;EACAK,EAAAA,MAAM,CAACM,cAAP,CAAsBR,IAAtB,EAA4BK,GAA5B,EAAiC;EAC/BI,IAAAA,GAD+B,iBACzB;EACJ,aAAOZ,GAAP;EACD,KAH8B;EAI/Ba,IAAAA,GAJ+B,eAI3BC,MAJ2B,EAInB;EACVJ,MAAAA,QAAQ,CAACI,MAAD,CAAR;EACAd,MAAAA,GAAG,GAAGc,MAAN;EACD;EAP8B,GAAjC;EASD;;EAEM,SAASJ,QAAT,CAAkBP,IAAlB,EAAwB;EAC7B,MAAI,CAACF,QAAQ,CAACE,IAAD,CAAb,EAAqB;EACnB;EACD;;EACD,SAAO,IAAID,QAAJ,CAAaC,IAAb,CAAP;EACD;;EC5BD,SAASY,KAAT,CAAeC,EAAf,EAAmBC,MAAnB,EAA2BT,GAA3B,EAAgC;EAC9BH,EAAAA,MAAM,CAACM,cAAP,CAAsBK,EAAtB,EAA0BR,GAA1B,EAA+B;EAC7BI,IAAAA,GAD6B,iBACvB;EACJ,aAAOI,EAAE,CAACC,MAAD,CAAF,CAAWT,GAAX,CAAP;EACD,KAH4B;EAI7BK,IAAAA,GAJ6B,eAIzBC,MAJyB,EAIjB;EACVE,MAAAA,EAAE,CAACC,MAAD,CAAF,CAAWT,GAAX,IAAkBM,MAAlB;EACD;EAN4B,GAA/B;EAQD;;EAEM,SAASI,SAAT,CAAmBF,EAAnB,EAAuB;EAC5B,MAAMG,IAAI,GAAGH,EAAE,CAACI,QAAhB;EACA;EACF;EACA;;EACE,MAAID,IAAI,CAAChB,IAAT,EAAe;EACbkB,IAAAA,QAAQ,CAACL,EAAD,CAAR;EACD;EACD;EACF;EACA;EACA;;EAGC;;EAED,SAASK,QAAT,CAAkBL,EAAlB,EAAsB;EACpB,MAAIb,IAAI,GAAGa,EAAE,CAACI,QAAH,CAAYjB,IAAvB;EACAA,EAAAA,IAAI,GAAGa,EAAE,CAACM,KAAH,GAAWvB,UAAU,CAACI,IAAD,CAAV,GAAmBA,IAAI,CAACoB,IAAL,CAAUP,EAAV,CAAnB,GAAmCb,IAArD;EACAqB,EAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBT,EAArB;;EACA,OAAK,IAAIR,GAAT,IAAgBL,IAAhB,EAAsB;EACpBY,IAAAA,KAAK,CAACC,EAAD,EAAK,OAAL,EAAcR,GAAd,CAAL;EACD;;EACDE,EAAAA,QAAQ,CAACP,IAAD,CAAR;EACD;;ECrCM,SAASuB,SAAT,CAAmBC,GAAnB,EAAwB;EAC7BA,EAAAA,GAAG,CAACC,SAAJ,CAAcC,KAAd,GAAsB,UAAUC,OAAV,EAAmB;EACvC,QAAMd,EAAE,GAAG,IAAX;EACAA,IAAAA,EAAE,CAACI,QAAH,GAAcU,OAAd,CAFuC;;EAKvCZ,IAAAA,SAAS,CAACF,EAAD,CAAT;EACD,GAND;EAOD;;ECRD,SAASW,GAAT,CAAaG,OAAb,EAAsB;EACpB,OAAKD,KAAL,CAAWC,OAAX;EACD;;EACDJ,SAAS,CAACC,GAAD,CAAT;;;;;;;;"}